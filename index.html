<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neurology AI Chatbot</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Animated gradient background */
    body {
      background: linear-gradient(120deg, #0f172a, #1e3a8a, #0e7490, #14b8a6);
      background-size: 400% 400%;
      animation: gradientShift 12s ease infinite;
      font-family: 'Inter', sans-serif;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Floating brain icon background */
    .floating-brain {
      position: absolute;
      top: 10%;
      right: 5%;
      font-size: 8rem;
      opacity: 0.05;
      animation: float 6s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    /* Chatbox glass effect */
    .glass {
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* Message animation */
    .message {
      animation: fadeIn 0.3s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen relative overflow-hidden">

  <!-- Floating brain background -->
  <div class="floating-brain">🧠</div>

  <!-- Chat container -->
  <div class="chat-container glass w-full max-w-2xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden">

    <!-- Header -->
    <div class="chat-header bg-gradient-to-r from-teal-500 to-blue-600 text-white text-center py-4 text-xl font-bold">
      🧠 Neurology AI Assistant
    </div>

    <!-- Messages area -->
    <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-3 bg-transparent">
      <!-- Messages will be added here -->
    </div>

    <!-- Loading -->
    <div id="loading-indicator" class="text-center text-gray-700 italic p-2 hidden">Thinking...</div>

    <!-- Input area -->
    <div class="flex p-3 border-t border-gray-300 bg-white/70">
      <input type="text" id="message-input" placeholder="Ask about neurology..." 
             class="flex-1 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
      <button id="send-button" 
              class="ml-3 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
        Send
      </button>
    </div>
  </div>

  <script>
    const chatMessages = document.getElementById('chat-messages');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');
    const loadingIndicator = document.getElementById('loading-indicator');

    const API_KEY = "YOUR_GEMINI_API_KEY"; // Replace with your real key
    const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=" + API_KEY;

    function addMessage(text, sender) {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message', 'px-4', 'py-2', 'rounded-xl', 'max-w-[75%]');
      if (sender === 'user') {
        messageDiv.classList.add('bg-blue-600', 'text-white', 'self-end', 'ml-auto', 'rounded-br-sm');
      } else {
        messageDiv.classList.add('bg-gray-200', 'text-gray-800', 'self-start', 'mr-auto', 'rounded-bl-sm');
      }
      messageDiv.innerText = text;
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    async function sendMessage() {
      const message = messageInput.value.trim();
      if (!message) return;

      addMessage(message, 'user');
      messageInput.value = '';

      loadingIndicator.classList.remove('hidden');
      sendButton.disabled = true;

      try {
        const payload = { contents: [{ parts: [{ text: message }] }] };

        const response = await fetch(API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const result = await response.json();
        const botResponse = result?.candidates?.[0]?.content?.parts?.[0]?.text;

        addMessage(botResponse || "Sorry, I couldn't process that.", 'bot');

      } catch (error) {
        addMessage("⚠️ Error: " + error.message, 'bot');
      } finally {
        loadingIndicator.classList.add('hidden');
        sendButton.disabled = false;
      }
    }

    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') sendMessage(); });

    // Initial welcome message
    addMessage("👋 Welcome! I am your Neurology AI Assistant. Ask me anything about the brain, nerves, or neurological conditions.", 'bot');
  </script>
</body>
</html>
